---
title: "Metcalf_Data_Replication_Assignment"
author: "Cat Metcalf"
date: "2023-10-26"
output: html_document
---

# Data Replication Assignment

This replication assignment is based on an article by Munro et al. that discusses the development of agriculture through human management in the Southern Levant.

## Background

## Supplementary NISP data from Table 1, p. 3
(May not have to include)

First we must load in the data sets that provide the supplementary data:
```{r}
library(curl)
library(tidyverse)

f <- curl("https://raw.githubusercontent.com/cattuccino/Metcalf-data-replication-assignment/main/AN588%20DataRep%20SuppData.csv")
S2 <- read.csv(f, header = TRUE, sep = ",", stringsAsFactors = FALSE)
head(S2)

f <- curl("https://raw.githubusercontent.com/cattuccino/Metcalf-data-replication-assignment/main/AN588%20DataRep%20SuppData%202.csv")
S3 <- read.csv(f, header = TRUE, sep = ",", stringsAsFactors = FALSE)
head(S3)

f <- curl("https://raw.githubusercontent.com/cattuccino/Metcalf-data-replication-assignment/main/AN588%20DataRep%20SuppData%203.csv")
S4 <- read.csv(f, header = TRUE, sep = ",", stringsAsFactors = FALSE)
head(S4)

f <- curl("https://raw.githubusercontent.com/cattuccino/Metcalf-data-replication-assignment/main/AN588%20DataRep%20SuppData%204.csv")
S5 <- read.csv(f, header = TRUE, sep = ",", stringsAsFactors = FALSE)
head(S5)
```

## Replication of Figure 2 with a Polynomial Regression Line and Spearman's Rho Calculation, p. 5
Plots the relative abundance indices and calculates a Spearman's Rho with associated p-value (Descriptive analysis and 2 Inferential Analyses).

Uses supplementary data: Figure 2a uses Table S3, 2b uses Table S4, 2c uses S5, and 2d uses S5.

First we have to make a plot of the data: (do for each plot)
```{r}
library(dplyr)

S3 |>
mutate(PERIOD = as.numeric(PERIOD))
Fig2a <- lm(S3$X.Gazella ~ poly(S3$PERIOD, 4), data=S3)
summary(Fig2a) #not working bc X is by time period so non-numeric....
```
```{r}
library(ggplot2)
S3 %>% 
  select("SITE", "PERIOD", "X.Gazella") %>% 
  filter(PERIOD == "KEB" | PERIOD == "GKEB" | PERIOD == "ENAT" | PERIOD == "LNAT" | PERIOD == "PPNA" | PERIOD == "EPPNB" | PERIOD == "MPPND")
  arrange("PERIOD") %>%
  
  ggplot(aes(x = PERIOD, y = X.Gazella)) +
  geom_point() +
  geom_smooth()
```
```{r}
S3 %>% 
  ggplot(aes(x = PERIOD, y = X.Gazella)) +
  geom_point() +
  geom_smooth()
```

## Replication of Abundance Indices in Chronological Order Figure 2, p. 6
(May end up removing but may do just to learn for myself)

Edit